graph TD
    A[Borrower Submits Application] --> B[Collect Required Documents]
    B --> C[Extract Financial Data]
    C --> D[Validate Information]
    D --> E{Complete Documentation?}
    E -->|No| F[Request Missing Documents]
    F --> B
    E -->|Yes| G[Authorize Credit Pull]
    
    G --> H[Pull Tri-Merge Credit Report]
    H --> I[Submit to AUS System]
    I --> J[Generate Loan Estimate]
    J --> K[Deliver TRID Disclosures]
    K --> L{Borrower Intent to Proceed?}
    L -->|No| M[Application Withdrawn]
    L -->|Yes| N[Order Property Appraisal]
    
    N --> O[Initiate Title Search]
    O --> P[Verify Employment]
    P --> Q[Verify Assets]
    Q --> R[Request IRS Transcripts]
    R --> S[Collect Insurance Binder]
    
    S --> T[Calculate Qualified Income]
    T --> U[Analyze Debt-to-Income]
    U --> V[Review Property Appraisal]
    V --> W[Evaluate Credit Risk]
    W --> X[Apply Investor Guidelines]
    X --> Y{Underwriting Decision}
    
    Y -->|Approved| Z[Issue Clear Approval]
    Y -->|Conditional| AA[List Required Conditions]
    Y -->|Declined| BB[Generate Decline Notice]
    
    AA --> CC[Collect Condition Responses]
    CC --> DD{All Conditions Satisfied?}
    DD -->|No| EE[Request Additional Info]
    EE --> CC
    DD -->|Yes| FF[Perform Final VOE]
    
    Z --> FF
    FF --> GG[Generate Closing Disclosure]
    GG --> HH[Three-Day Waiting Period]
    HH --> II[Final Underwriting Review]
    II --> JJ[Issue Clear to Close]
    JJ --> KK[Authorize Loan Funding]
    
    BB --> LL[End Process]
    M --> LL
    KK --> MM[Loan Closed]
    
    classDef phaseOne fill:#e1f5fe
    classDef phaseTwo fill:#e8f5e8
    classDef phaseThree fill:#fff3e0
    classDef phaseFour fill:#fce4ec
    classDef phaseFive fill:#f3e5f5
    classDef terminal fill:#ffebee
    
    class A,B,C,D,E,F,G phaseOne
    class H,I,J,K,L,M phaseTwo
    class N,O,P,Q,R,S phaseThree
    class T,U,V,W,X,Y,Z,AA,BB phaseFour
    class CC,DD,EE,FF,GG,HH,II,JJ,KK phaseFive
    class LL,MM terminal