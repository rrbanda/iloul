graph TD
    A[Borrower Submits Application] --> B[Process Documentation]
    B --> C[Extract Financial Data]
    C --> D[Validate Information]
    D --> E{Complete Application?}
    E -->|No| F[Request Additional Info]
    F --> B
    E -->|Yes| G[Perform Preliminary Risk Screen]
    G --> H[Generate Immediate Feedback]
    
    H --> I[Comprehensive Risk Analysis]
    I --> J[Evaluate Creditworthiness]
    J --> K[Analyze Income & Debt]
    K --> L[Assess Collateral Value]
    L --> M[Apply Compliance Rules]
    M --> N[Calculate Confidence Score]
    N --> O{Risk Assessment Complete?}
    O -->|Needs Review| P[Flag for Manual Review]
    O -->|Complete| Q[Generate Decision Logic]
    
    Q --> R[Synthesize Final Decision]
    R --> S{Loan Decision}
    S -->|Approved| T[Generate Approval Letter]
    S -->|Conditional| U[Create Condition List]
    S -->|Declined| V[Prepare Decline Notice]
    
    T --> W[Create Required Disclosures]
    U --> W
    V --> W
    
    W --> X[Generate Decision Explanation]
    X --> Y[Prepare Digital Workflow]
    Y --> Z[Send to Borrower]
    
    P --> AA[Manual Underwriter Review]
    AA --> R
    
    Z --> BB{Borrower Response}
    BB -->|Accepts| CC[Proceed to Closing]
    BB -->|Requests Changes| DD[Modify Terms]
    BB -->|Declines| EE[Close Application]
    
    DD --> Q
    CC --> FF[Application Complete]
    EE --> FF
    
    subgraph "Step 1: Application Processing"
        A
        B
        C
        D
        E
        F
        G
        H
    end
    
    subgraph "Step 2: Risk Assessment"
        I
        J
        K
        L
        M
        N
        O
        P
        Q
    end
    
    subgraph "Step 3: Decision & Documentation"
        R
        S
        T
        U
        V
        W
        X
        Y
        Z
    end
    
    classDef stepOne fill:#e1f5fe
    classDef stepTwo fill:#fce4ec
    classDef stepThree fill:#e8f5e8
    classDef decision fill:#fff3e0
    classDef terminal fill:#ffebee
    
    class A,B,C,D,E,F,G,H stepOne
    class I,J,K,L,M,N,O,P,Q stepTwo
    class R,S,T,U,V,W,X,Y,Z stepThree
    class AA,BB,CC,DD decision
    class EE,FF terminal